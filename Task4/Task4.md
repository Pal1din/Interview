# Задача 4. Система статистики.

Есть задание на разработку простой системы статистики:

Есть какое-то имя и набор численных значений, и по этим значениям заказчик желает видеть данные в виде среднего этих чисел.

Например, если есть такой набор:

ваза 1 2 3

то система выведет 2

## Этап 1

**Юскейс добавления выглядит следующим образом:**

1. Заказчик вводит в консоли строку `append [ключ] [значения через пробел]`
2. Если данные введены верно, система сообщает, что успешно добавила новые значения
   1. Если ключа раньше не было система добавляет новый ключ и добавляет к нему значения сообщая об этом пользователю
   2. Если данные введены неверно система сообщает об ошибке



**Юскейс очистки:**

1. Заказчик вводит команду `clear [ключ]`
2. Если ключ существует, система очищает его от значений и сообщает заказчику
   1. Если ключа не существует система сообщает об ошибке



**Юскейс подсчета:**

1. Заказчик вводит команду `stat [ключ]`
2. Если ключ существует и в нём есть данные, команда вернет среднее по всем известным значениям
   1. Если ключа не существует или данные не заполнены - система оповещает об этом











## Этап 2.

Заказчик понял, что держать данные в ОЗУ плохая идея, потому что приложение приходится постоянно держать открытым, поэтому он хочет, чтобы все эти данные хранились в файле в системе, к которому он может указать путь через конфигурацию приложения.

При этом, если файла не существует, он хочет чтобы приложение оповещало его об этом.

Предыдущие Юскейсы не изменились.











## Этап 3.

Заказчик решил дать доступ к приложению своим коллегам, и осознал, что они плохо ориентируются в консоли. Теперь он хочет, чтобы все эти операции можно было выполнять как через сайт (для его коллег), так и через консоль (ему так проще, он уже привык).

В сайте он хочет видеть 3 кнопки: добавление, очистка и подсчет, которые будут перенаправлять пользователя на соответствующие страницы, где они будут использованы аналогично вышеуказанным юскейсам. Новые юскейсы для сайта с учетом того, что он находится на главной странице:

**Юскейс добавления выглядит следующим образом:**

1. Пользователь жмет на кнопку "Добавить значения"
2. Пользователь перенаправляется на страницу добавления
3. Пользователь вводит числа через запятую
4. Пользователь жмет кнопку "ОК"
5. _Если данные введены верно, система сообщает, что успешно добавила новые значения_
   1. _Если ключа раньше не было система добавляет новый ключ и добавляет к нему значения сообщая об этом пользователю_
   2. _Если данные введены неверно система сообщает об ошибке_



**Юскейс очистки:**

1. Пользователь жмет на кнопку "Очистка"
2. Пользователь перенаправляется на страницу очистки
3. Пользователь вводит имя ключа в поле
4. Пользователь жмет кнопку "ОЧИСТИТЬ"
5. _Если ключ существует, система очищает его от значений и сообщает ему_
   1. _Если ключа не существует система сообщает об ошибке_



**Юскейс подсчета:**

1. Пользователь жмет на кнопку "Подсчет"
2. Пользователь перенаправляется на страницу статистики
3. Пользователь вводит имя ключа в поле
4. Пользователь жмет кнопку "Получить"
5. _Если ключ существует и в нём есть данные, на странице появляется текст с средним по всем известным значениям_
   1. _Если ключа не существует или данные не заполнены - система оповещает об этом_











## Этап 4. 

У системы появился новый клиент, но этого клиента смущает то, что все его данные будут храниться в файле. Он считает, что лучше для таких вещей развернуть базу данных и использовать её в качестве источника данных. Надо удовлетворить этого клиента, не смутив первого заказчика.

Вы решили, что база данных Postgres хорошо для этого подойдет.









## Этап 5.

Новый клиент хочет большего!
Он поздно осознал, что для некоторых его задач нужно не среднее, а сумма.

И при этом он хочет сам выбирать, где у него будет использоваться сумма, а где среднее.

И, кажется, первоначальный заказчик тоже к этому пришел. Теперь они оба терроризируют вас этой новой фичей...

Все вместе вы пришли к выводу, что фича будет выглядеть следующим образом:

**Юскейс изменения метода подсчета:**

**В консоли:**

1. Пользователь вводит `change-method [ключ] [метод(avg|sum)]`

**На сайте:**

1. Пользователь жмет на кнопу управление методами
   1.2. Пользователь жмет на кнопку изменить метод
   1.3. Пользователь вводит в текстовое поле имя ключа и выбирает нужный метод из списка 

2. Если всё введено верно, система сообщает об изменении, а при подсчете соответствующего ключа будет выведено значение в соответствии с методом.

   1. Если нет ключа или неверно введено имя метода, система об этом сообщает.
